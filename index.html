<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="theme-color" content="#05060A">
    <meta name="description" content="Discover your personal 18-day energy cycle. SineDay Wave reveals the rhythms that shape your life.">

    <!-- Open Graph / Social Meta -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="SineDay Wave - Your Personal Energy Cycle">
    <meta property="og:description" content="Discover your personal 18-day energy cycle based on your birthdate.">
    <meta property="og:image" content="https://sksinedays.github.io/Day9.jpeg">
    <meta property="og:url" content="https://sksinedays.github.io/">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="SineDay Wave">
    <meta name="twitter:description" content="Discover your personal 18-day energy cycle">

    <!-- Apple Mobile Web App -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="SineDay">

    <title>SineDay Wave - Your Personal Energy Cycle</title>

    <!-- Preload critical assets -->
    <link rel="preconnect" href="https://fonts.googleapis.com">

    <link rel="stylesheet" href="styles.css">

    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="icon.svg">
    <link rel="apple-touch-icon" href="icon.svg">
</head>
<body>
    <!-- Skip Link -->
    <a class="skip-link" href="#main-content">Skip to main content</a>

    <!-- Background Image Container -->
    <div id="background-image" class="background-image-container" aria-hidden="true"></div>

    <!-- Top Bar -->
    <header class="top-bar">
        <div class="top-bar-content">
            <h1 class="logo">SineDay</h1>
            <div class="top-bar-actions">
                <button id="info-btn" class="icon-btn" aria-label="Information" title="About SineDay">
                    <svg aria-hidden="true" focusable="false" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M10 18C14.4183 18 18 14.4183 18 10C18 5.58172 14.4183 2 10 2C5.58172 2 2 5.58172 2 10C2 14.4183 5.58172 18 10 18Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M10 14V10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M10 6H10.01" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
                <button id="share-btn" class="icon-btn" aria-label="Share" title="Share your SineDay">
                    <svg aria-hidden="true" focusable="false" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M4 12V16C4 16.5304 4.21071 17.0391 4.58579 17.4142C4.96086 17.7893 5.46957 18 6 18H14C14.5304 18 15.0391 17.7893 15.4142 17.4142C15.7893 17.0391 16 16.5304 16 16V12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M13 5L10 2L7 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M10 2V12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main id="main-content" class="main-content">
        <!-- Wave Canvas -->
        <div class="wave-container">
            <canvas
              id="wave-canvas"
              class="wave-canvas"
              role="img"
              aria-label="SineDay wave visualization"
              aria-describedby="wave-a11y-desc"
            ></canvas>
            <p id="wave-a11y-desc" class="sr-only">
              A wave-style chart that marks your current position in the 18-day SineDay cycle.
            </p>
        </div>

        <!-- Input Container (Collapsible, initially visible) -->
        <div id="input-container" class="input-container visible">
            <div class="input-card">
                <label for="birthdate-input" class="input-label">Enter your birthdate</label>
                <input
                    type="date"
                    id="birthdate-input"
                    class="date-input"
                    aria-label="Birthdate"
                    max="9999-12-31"
                />
                <button id="calculate-btn" class="calculate-btn">
                    Show my wave
                </button>
            </div>
        </div>

        <!-- Result Card -->
        <div id="result-card" class="result-card" role="region" aria-live="polite" aria-labelledby="day-number">
            <div class="swipe-hint">
                <svg aria-hidden="true" focusable="false" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M5 12H19M19 12L12 5M19 12L12 19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span>Swipe right to try another date</span>
            </div>
            <div id="scroll-hint" class="scroll-hint hidden" aria-hidden="true">
              <svg aria-hidden="true" focusable="false" width="20" height="20" viewBox="0 0 24 24" fill="none"
                xmlns="http://www.w3.org/2000/svg">
                <path d="M12 5V19" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                <path d="M19 12L12 19L5 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                  stroke-linejoin="round"/>
              </svg>
              <span>Scroll down to explore your day</span>
            </div>
            <div class="result-content">
                <h2 id="day-number" class="day-number">SineDay 1</h2>
                <img id="todayDuck" class="duck-image" alt="Today's SineDuck" />
                <p id="day-phase" class="day-phase">RISING • INITIATION</p>
                <p id="day-description" class="day-description">Fresh beginnings call you forward</p>
            </div>
        </div>

        <!-- Day Image Card -->
        <div id="day-image-card" class="day-image-card" role="region">
            <div class="day-image-content">
                <img id="dayImage" class="day-full-image" alt="Your SineDay" />
            </div>
        </div>

        <!-- Day Details Card (Paragraph + Bullets) -->
        <div id="day-details-card" class="day-details-card" role="region" aria-label="Day details">
            <div class="day-details-content">
                <p id="day-details-paragraph" class="day-details-paragraph"></p>
                <ul id="day-details-bullets" class="day-details-bullets"></ul>
            </div>
        </div>

        <!-- Email Signup Card (positioned at bottom) -->
        <div id="email-card" class="email-card visible">
            <div class="input-card">
                <h2 class="input-label" style="font-size: 1.2em; margin-bottom: 8px;">Get your daily SineDay</h2>
                <p class="input-label" style="opacity: 0.85; margin-bottom: 16px;">Receive personalized insights every morning at 7:00 AM</p>

                <label for="email-input" class="input-label">Email address</label>
                <input
                    type="email"
                    id="email-input"
                    class="date-input"
                    placeholder="you@example.com"
                    autocomplete="email"
                />

                <label class="input-label" style="margin-top:10px; display:flex; gap:10px; align-items:center;">
                    <input type="checkbox" id="email-consent" />
                    <span>I agree to receive daily SineDay emails.</span>
                </label>

                <button id="subscribe-btn" class="calculate-btn" style="margin-top: 16px;">
                    Subscribe
                </button>

                <p id="signup-status" class="input-label" role="status" aria-live="polite" aria-atomic="true" style="margin-top:10px; opacity:.85; text-align: center;"></p>
            </div>
        </div>

        <!-- Premium Upsell Card -->
        <div id="premium-card" class="premium-card visible">
            <div class="input-card premium-card-content">
                <h2 class="premium-title">Live in Rhythm</h2>
                <p class="premium-tagline">
                    Your life moves in waves.<br>
                    See them. Honor them. Plan with them.
                </p>
                <p class="premium-body">
                    SineDay Premium reveals your personal rhythm across time. See how energy rises and rests throughout the month, and step into each week with clarity, intention, and flow.
                </p>
                <ul class="premium-bullets">
                    <li>Monthly wave calendars — your rhythm, made visible</li>
                    <li>Weekly planning pages — space to reflect and respond</li>
                    <li>Daily SineDuck markers — gentle visual guidance</li>
                    <li>Save up to 10 profiles — for yourself and those you walk with</li>
                </ul>
                <p class="premium-invitation">A small monthly offering to stay aligned.</p>
                <p class="premium-subtext">$5 per month · Cancel anytime</p>
                <button id="premium-btn" class="calculate-btn premium-btn" style="margin-top: 20px;">
                    Begin Living in Rhythm
                </button>
            </div>
        </div>
    </main>

    <!-- Load Supabase from CDN -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <!-- Load JavaScript as modules -->
    <script type="module" src="js/ui.js"></script>

    <!-- Info Modal -->
    <div id="info-modal" class="sd-modal" aria-hidden="true">
      <div class="sd-modal-backdrop" data-close="info-modal"></div>

      <div class="sd-modal-panel" role="dialog" aria-modal="true" aria-labelledby="info-modal-title">
        <div class="sd-modal-header">
          <h2 id="info-modal-title" class="sd-modal-title">About SineDay</h2>
          <button id="info-modal-close" class="sd-modal-close" aria-label="Close">
            <svg aria-hidden="true" focusable="false" width="18" height="18" viewBox="0 0 24 24" fill="none">
              <path d="M18 6L6 18M6 6l12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </button>
        </div>

        <div class="sd-modal-body">
          <p><strong>SineDay reflects an ancient truth:</strong><br>all living energy moves in waves.</p>

          <p>
            Across civilizations, observers of nature recognized that life rises, peaks, and rests in repeating cycles.
            This rhythm is not external—it is the inner power wave of every living soul.
          </p>

          <p><strong>The 18-day SineDay cycle</strong> reveals where you are on that wave today.</p>

          <p><strong>Some days naturally support:</strong></p>
          <ul class="sd-modal-list">
            <li>Initiation</li>
            <li>Growth</li>
            <li>Expression</li>
            <li>Integration</li>
            <li>Rest</li>
          </ul>

          <p>This is not belief—it is observation.</p>

          <p>
            SineDay does not tell you what to do.<br>
            It shows you where you are.
          </p>

          <p><strong>There is no failure in rhythm.</strong><br>Only alignment.</p>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <footer class="site-footer">
      <a href="/accessibility.html">Accessibility</a>
    </footer>

    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/service-worker.js')
                    .then(reg => console.log('SW registered'))
                    .catch(err => console.log('SW registration failed', err));
            });
        }
    </script>
</body>
</html>
