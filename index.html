<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="theme-color" content="#05060A">
    <meta name="description" content="Discover your personal 18-day energy cycle. SineDay Wave reveals the rhythms that shape your life.">

    <!-- Open Graph / Social Meta -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="SineDay Wave - Your Personal Energy Cycle">
    <meta property="og:description" content="Discover your personal 18-day energy cycle based on your birthdate.">
    <meta property="og:image" content="https://sksinedays.github.io/Day9.jpeg">
    <meta property="og:url" content="https://sksinedays.github.io/">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="SineDay Wave">
    <meta name="twitter:description" content="Discover your personal 18-day energy cycle">

    <!-- Apple Mobile Web App -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="SineDay">

    <title>SineDay Wave - Your Personal Energy Cycle</title>

    <!-- Preload critical assets -->
    <link rel="preconnect" href="https://fonts.googleapis.com">

    <link rel="stylesheet" href="styles.css">

    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="icon.svg">
    <link rel="apple-touch-icon" href="icon.svg">
</head>
<body>
    <!-- Background Image Container -->
    <div id="background-image" class="background-image-container" aria-hidden="true"></div>

    <!-- Top Bar -->
    <header class="top-bar">
        <div class="top-bar-content">
            <h1 class="logo">SineDay</h1>
            <div class="top-bar-actions">
                <button id="info-btn" class="icon-btn" aria-label="Information" title="About SineDay">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M10 18C14.4183 18 18 14.4183 18 10C18 5.58172 14.4183 2 10 2C5.58172 2 2 5.58172 2 10C2 14.4183 5.58172 18 10 18Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M10 14V10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M10 6H10.01" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
                <button id="share-btn" class="icon-btn" aria-label="Share" title="Share your SineDay">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M4 12V16C4 16.5304 4.21071 17.0391 4.58579 17.4142C4.96086 17.7893 5.46957 18 6 18H14C14.5304 18 15.0391 17.7893 15.4142 17.4142C15.7893 17.0391 16 16.5304 16 16V12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M13 5L10 2L7 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M10 2V12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Wave Canvas -->
        <div class="wave-container">
            <canvas id="wave-canvas" class="wave-canvas"></canvas>
        </div>

        <!-- Input Container (Collapsible, initially visible) -->
        <div id="input-container" class="input-container visible">
            <div class="input-card">
                <label for="birthdate-input" class="input-label">Enter your birthdate</label>
                <input
                    type="date"
                    id="birthdate-input"
                    class="date-input"
                    aria-label="Birthdate"
                    max="9999-12-31"
                />
                <button id="calculate-btn" class="calculate-btn">
                    Show my wave
                </button>
            </div>
        </div>

        <!-- Email Signup Card (Card 2 initially, Card 3 after date entry) -->
        <div id="email-card" class="email-card visible">
            <div class="input-card">
                <h2 class="input-label" style="font-size: 1.2em; margin-bottom: 8px;">Get your daily SineDay</h2>
                <p class="input-label" style="opacity: 0.85; margin-bottom: 16px;">Receive personalized insights every morning at 7:00 AM</p>

                <label for="email-input" class="input-label">Email address</label>
                <input
                    type="email"
                    id="email-input"
                    class="date-input"
                    placeholder="you@example.com"
                    autocomplete="email"
                />

                <label class="input-label" style="margin-top:10px; display:flex; gap:10px; align-items:center;">
                    <input type="checkbox" id="email-consent" />
                    <span>I agree to receive daily SineDay emails.</span>
                </label>

                <button id="subscribe-btn" class="calculate-btn" style="margin-top: 16px;">
                    Subscribe
                </button>

                <p id="signup-status" class="input-label" style="margin-top:10px; opacity:.85; text-align: center;"></p>
            </div>
        </div>

        <!-- Result Card -->
        <div id="result-card" class="result-card" role="region" aria-live="polite">
            <div class="swipe-hint">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M5 12H19M19 12L12 5M19 12L12 19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span>Swipe right to try another date</span>
            </div>
            <div class="result-content">
                <h2 id="day-number" class="day-number">SineDay 1</h2>
                <img id="todayDuck" class="duck-image" alt="Today's SineDuck" />
                <p id="day-phase" class="day-phase">RISING â€¢ INITIATION</p>
                <p id="day-description" class="day-description">Fresh beginnings call you forward</p>
            </div>
        </div>

        <!-- Day Image Card -->
        <div id="day-image-card" class="day-image-card" role="region">
            <div class="day-image-content">
                <img id="dayImage" class="day-full-image" alt="Your SineDay" />
            </div>
        </div>
    </main>

    <!-- Load JavaScript as modules -->
    <script type="module" src="js/ui.js"></script>

    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/service-worker.js')
                    .then(reg => console.log('SW registered'))
                    .catch(err => console.log('SW registration failed', err));
            });
        }
    </script>
</body>
</html>
